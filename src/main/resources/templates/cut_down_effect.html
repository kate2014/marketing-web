<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<style type="text/css">

    html,body{
        width: 100%;
        height: 100%;
        margin: 0px;
        background-color: #FFFFFF;
    }

    <!-- 选项卡 -->
    ol, ul, li{	list-style: none}
    /*html,body { margin:0; padding:0; height:100%}*/
    .table_card { /*width:96%;*/ margin: 5px 20px 0 20px;}
    .table_card .tab { height:37px; font-size:14px;}
    .table_card .tab li {font-size: 10px; float:left; height:37px; line-height:37px; padding:0 25px; margin-right:4px; border-radius: 5px 5px 0 0;}
    .table_card .tab li:hover { height:37px; cursor:pointer;}
    .table_card .activ { height:37px !important; !important; border-top:1px solid #e1e1e1;border-left:1px solid #e1e1e1;border-right:1px solid #e1e1e1;background-color: #FFFFFF;color: #3b3b1f}
    .table_card .inverse { height:37px; background-color: #e1e1e1;color: #a6a6a6}
    .table_card .hint {color: white; display:block; text-align: center;}

</style>

<head>
    <meta charset="UTF-8">
    <title>秒杀活动效果</title>
    <link rel="stylesheet" th:href="@{/css/public.css}" href="../static/css/public.css" type="text/css" />
    <link rel="stylesheet" th:href="@{/css/widget.css}" href="../static/css/widget.css" type="text/css" />
    <link rel="stylesheet" th:href="@{/css/common.css}" href="../static/css/common.css" />
    <link rel="stylesheet" th:href="@{/css/base.css}" href="../static/css/base.css" />
    <link rel="stylesheet" th:href="@{/css/customer.css}" href="../static/css/customer.css" />
    <script type="text/javascript" th:src="@{/js/jquery-3.1.1.min.js}" src="../static/js/jquery-3.1.1.min.js" ></script>
    <script type="text/javascript" th:src="@{/js/base.js}" src="../static/js/base.js" ></script>
    <script type="text/javascript" th:src="@{/js/window/window.ext.js}" src="../static/js/window/window.ext.js" ></script>

    <!-- diglog -->
    <script type="text/javascript" th:src="@{/js/diy_dialog.js}"></script>
    <link rel="stylesheet" th:href="@{/css/diy_dialog.css}" type="text/css" />

    <script type="text/javascript" src="../static/js/echarts.min.js" th:src="@{/js/echarts.min.js}"></script>
</head>

<script type="text/javascript">

    $(function () {
        var opType = $("input[name='opType']").val();
        opType = opType ? opType : 0;
        $(".tab li").eq(opType).addClass("activ").siblings().removeClass("activ");
        var tabIndex = $(".tab li.activ").index();
        $(".tab li").click(function(){
            var clickIndex = $(this).index();

            if(clickIndex != 0){
                $("#0").addClass("inverse");
            }
            if(clickIndex != 1){
                $("#1").addClass("inverse");
            }
            if(clickIndex != 2){
                $("#2").addClass("inverse");
            }
            if(clickIndex != 3){
                $("#3").addClass("inverse");
            }
            $(".tab li").eq(clickIndex).addClass("activ").siblings().removeClass("activ");

            $("input[name='opType']").val(clickIndex);

        })


    });

</script>

<body>
<div class="parent top_view_style">
    <img th:src="@{/images/lable.jpg}" width="5" height="26" style="margin-left: 20px">
    <label class="text_navigation" style="margin-left: 10px;width: 30%">营销 》砍价 》活动效果</label>

    <div align="right" style="width: 100%;margin-right: 50px">
        <button class="gray_button_style" value="" th:onclick="@{|location='${basePath}/cutDownMarketing/queryListData'|}" style="margin-left: 10px">返回</button>
    </div>
</div>

<div style="width: 90%;height:400px; align-content: center; text-align: center; margin-left: 5%;margin-top: 20px">
    <div id="effectReport" style="width: 100%;height:400px;"></div>
</div>

<div class="parent_h container" style="padding: 10px;background-color: #4e555b;margin-top: 20px;color: #FFFFFF;font-size: 14px">
    <div class="parent">

        <img src="../static/images/see_icon.png" th:src="@{/images/see_icon.png}" style="margin-right: 5px;height: 23px;width: auto">

        <div>浏览人数：<span th:text="${seeCount.id}" style="margin-right: 5px;font-size: 16px;color: #FF7E00;">100000.00</span>人</div>
        <div style="margin-left: 15px">
            浏览次数：<span th:text="${seeCount.operationalCount}" style="margin-right: 5px;font-size: 16px;color: #FF7E00;">100000.00</span>次</div>

    </div>

    <div class="parent" style="margin-left: 25px">

        <img src="../static/images/share_icon.png" th:src="@{/images/share_icon.png}" style="margin-right: 5px;height: 21px;width: auto">

        <div>分享人数：<span th:text="${shareCount.id}" style="margin-right: 5px;font-size: 16px;color: #FF7E00">100000.00</span>人</div>
        <div style="margin-left: 15px">
            分享次数：<span th:text="${shareCount.operationalCount}" style="margin-right: 5px;font-size: 16px;color: #FF7E00;">100000.00</span>次</div>

    </div>

    <div class="parent" style="margin-left: 25px">

        <img src="../static/images/buy_icon.png" th:src="@{/images/buy_icon.png}" style="margin-right: 5px;height: 24px;width: auto">

        <div>参与人数：<span th:text="${salesCount.id}" style="margin-right: 5px;font-size: 16px;color: #FF7E00">100000.00</span>人</div>
        <div style="margin-left: 15px">
            购买数量：<span th:text="${salesCount.operationalCount}" style="margin-right: 5px;font-size: 16px;color: #FF7E00;">100000.00</span>次</div>

    </div>

</div>

<div class="table_card" style="margin-top: 20px">

    <ul class="tab" style="margin-left: 30px">
        <li id="0" class="activ" style="margin-bottom: -1px;width: 150px;text-align: center" target="dish_iframe" th:href="@{/cutDownEffect/browseDetail(type=1,activityId=${searchModel.activityId})}">浏览情况</li>
        <li id="1" class="inverse" style="margin-bottom: -1px;width: 150px;text-align: center" target="dish_iframe" th:href="@{/cutDownEffect/browseDetail(type=2,activityId=${searchModel.activityId})}">分享情况</li>
        <li id="2" class="inverse" style="margin-bottom: -1px;width: 150px;text-align: center" target="dish_iframe" th:href="@{/cutDownEffect/joinCutDownEffect(activityId=${searchModel.activityId})}">参与情况</li>
        <li id="3" class="inverse" style="margin-bottom: -1px;width: 150px;text-align: center" target="dish_iframe" th:href="@{/cutDownEffect/finishCutDownEffect(activityId=${searchModel.activityId})}">售卖情况</li>
    </ul>
    <div style="height: 1px;width: 100%;background-color: #e1e1e1;margin-top: -1px"></div>
</div>

<div align="center" style="margin-top: 10px;width: 100%;height: 100%">
    <input type="hidden" name="opType" value="0">

    <iframe id="dish_iframe" th:src="@{/flashSalesEffect/browseDetail(type=1,activityId=${searchModel.activityId})}" width="100%" height="100%" style="border: 0px"></iframe>

</div>

<script th:inline="javascript">

    var dom = document.getElementById("effectReport");
    var myChart = echarts.init(dom);
    var app = {};
    option = null;
    app.title = '活动效果概况';

    var seriesLabel = {
        normal: {
            show: true,
            textBorderColor: '#333',
            textBorderWidth: 2
        }
    }

    option = {
        title: {
            text: '活动效果'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        legend: {
            data: ['人数', '次数']
        },
        grid: {
            left: 100
        },
        toolbox: {
            show: true,
            feature: {
                saveAsImage: {}
            }
        },
        xAxis: {
            type: 'value',
            name: '数量',
            axisLabel: {
                formatter: '{value}'
            }
        },
        yAxis: {
            type: 'category',
            inverse: true,
            data: ['浏览', '分享', '购买'],
            axisLabel: {
                formatter: function (value) {
                    return '{value|' + value + '}';
                },
                margin: 20,
                rich: {
                    value: {
                        lineHeight: 30,
                        align: 'center'
                    },
                    Sunny: {
                        height: 40,
                        align: 'center'
                    },
                    Cloudy: {
                        height: 40,
                        align: 'center'
                    },

                }
            }
        },
        series: [
            {
                name: '人数',
                type: 'bar',
                data: [[${persionCount}]],
                label: seriesLabel,
            },
            {
                name: '次数',
                type: 'bar',
                label: seriesLabel,
                data: [[${optionCount}]]
            }
        ]
    };


    if (option && typeof option === "object") {
        myChart.setOption(option, true);
    }


</script>

</body>
</html>
